# 강의 노트
- 일시: 21.11.04 (목) 19:30~10:30
- 강사: 박재성
- 교육: 우아한테크코스 프로 3기 1주차 강의

## 메모
- TDD를 시작전에 요구사항과 기능정리가 명확해야 한다.
- 도메인 설계를 먼저 하고 1:N 등 간략하게 하고 TDD를 진행해야 한다. 최소한의 설계는 필요하다.
- 상태값을 가지는 도메인 객체에 로직이 들어가야 TDD가 가능해진다.
- 서비스 로직에는 비지니스에 대한 로직만 들어가야 한다.
- 테스트가 어려운 부분은 OBJECT GRAPH의 최상단으로 이동시킨다.
  - RANDOM 값등
  - 파라미터나 외부로부터 주입 받는다.
- 테스트하기 쉬운 코드부터 시작해서 정말 어려운 부분은 구조를 변경한다.
- 컴파일 에러를 최소화하면서 리팩토링해봐라
  - getRandomNumber private 메소드를 protoected 로 바꿔서 사용하는 곳에서 override 재구현
  - 이렇 중간단계를 하면 점진적으로 리팩토링을 할 수 있다. mock을 사용하지 않아도 된다.
- 클래스 이름 짓기가 어려우면 TDD가 있으면 막 지어도 된다. 왜냐하면 리팩토링을 보장하기 때문이다.
  - 우선 빠르게 실패하는 테스트를 먼저 작성한다.
- TDD는 무조건 첫번째는 컴파일에러가 발생할 수 밖에 없다. 첫번쨰 과제는 컴파일 에러를 제거하는 것이다.
- 데이터타입보다 객체 개념으로 생각하기.
  - 그래서 상태값이 있으면 equals and hashcode 가 필수다.
- 상태값을 Get 하지 말고 메시지를 보내라. 또, 클래스 범위는 작게. 잘게 분리하라. 이것만해도 많이 도움 된다.
  - int getNumber() -> boolean movable()
- 처음부터 패키지와 인터페이스를 만들지말고, 점진적으로 확장해야 오버엔지니어링에 빠지지 않는다.
  - 인터페이스는 구현체들이 많아질때 만들어도 된다.
- 테스트를 위해 생성자를 추가하는 것은 괜찮다. 메서드가 추가되는 것은 안된다.
- 모든 원시값과 문자열을 포장한다 / 콜렉션을 사용한다 원칙
  - 클래스로 잘게 쪼갤 수 밖에 없게 된다.
  - 자꾸 작은 클래스로 쪼개봐라
- 클래스 분리는 메서드 분리보다 몇 배 더 힘들다
  - 자꾸 작은 클래스로 쪼개봐라. 
  - Getter 를 최소화할 수 있다.
- 최대한 불변객체로 도전. 객체를 리턴할때는 불변객체로.
  - 불변객체를 쓰면 버그를 방지할 수 있다.


## 로또-TDD 강의 내용
  
### TDD
- 일급콜렉션 만들기
  - get을 사용해서 collection에 접근하기보다 메시지로 전달
-  private 메서드가 크기가 크면 다른 객체로 분리할 필요가 있다.
- 인자수를 줄이기
- enum 을 활용하기
- 기능목록과 객체 설계 문서는 계속 업데이트

### 파라미터 줄이기
- 파라미터를 줄이기 위해서는 파라미터들을 조합하여 새로운 객체를 설계하기
- 상속 (is-A) vs 조합(has A)
- 상속은 코드의 재사용성 측면에서 유리
- 조합은 유연성 측면에서 유리
- 변화에 빠르게 대응하는 것이 중요해지고 있는 현재는 재사용성보다 유연성이 훨씬 더 중요하다.
- 처음부터 메시지를 도출해내기 쉽지 않다. 보통 리팩토링하면서 필요한 메시지를 도출할 수 있다. 
    - 인터페이스 도출. Matchable


### 정적 팩토리 메서드, 인스턴스 캐싱
- 모든 원시값과 문자열을 포장한다.
- 생성자 대신 정적팩토리 메서드를 사용하라.
- mutable object 가변 객체보다 immutable object(불변 객체) 기반으로 구현하라
- 파라미터를 조합하여 포장하게 되면, 테스트할 때 힘든 경우가 있다.
  - 내부 정적팩토리 메서드를 활용. 원시타입들을 인자로 받아서 객체를 생성.
- equals and hascode 구현 필수..
- 원시타입을 객체화했을 때, 인스턴스가 많아지는 성능 이슈가 있을 수 있다.
  - 그래서 캐싱하는 작업이 필요하다. 팩토리 메서드를 만들어서 재사용할 수 있게.
  - 예를 들면 로또 번호 1~45를 미리 생성. STATIC 으로


### 개인 감성평

- 교육과정은 기본적으로 OOP, TDD, 클린코드, 이펙티브 자바 원칙들을 지키는 훈련이다.