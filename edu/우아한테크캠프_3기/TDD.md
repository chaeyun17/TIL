# Test Driven Development (TDD)
- 테스트 주도 개발
- 테스트 코드를 먼저 작성한 뒤, 프로덕션 코드를 작성한다.
- TDD는 테스트를 위한 기술이 아닌, 분석 및 설계의 기술이다.
  - TDD란 프로그래밍의 의사결정과 피드백 사이의 간극을 의식하고 이를 제어하는 기술이다 - 켄트백
  - TDD의 아이러니 중 하나는 테스트 기술이 아니라는 점이다. TDD 는 분석 기술이며, 설계 기술이기도 하다. - 켄트백

## TDD 장점
- 테스트 코드가 있기 때문에, 디버깅 시간을 단축
- 테스트 코드 자체가 기능 명세(문서)가 된다
- 요구사항, 리팩토링, 기능 변화에 따른 두려움과 위험을 줄여준다


## TDD 사이클
1. 실패하는 테스트를 작성한다
2. 테스트가 성공하도록 프로덕션 코드를 작성한다
3. 프로덕션 코드와 테스트 코드를 리팩토링한다.
  - 테스트 코드가 통과했다고, 리팩토링을 제대로 하지 않고 지나가는 경우가 많다. TDD의 핵심은 리팩토링이다.

## TDD 원칙
1. 실패하는 단위 테스트를 작성할 때까지 프로덕션 코드를 작성하지 않는다
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트랄 작성한다
3. 현재 실패하는 테스틑 통과할 정도로만 실제 코드를 작성한다


## TDD Get Started
1. 요구사항을 정리한다.
1. 도메인(객체) 설계를 한다. 
  1. 도메인 설계가 어려울 경우, 기능 목록을 작성한다.
  1. 기능 목록도 작성하기 힘들다면, 우선 프로덕션 코드를 다 작성한 뒤, 지우고 다시 설계하여 TDD로 진행해본다
1. 각 도메인에 대한 테스트 코드를 작성한다.
1. 프로덕션 코드를 작성한다.


## 점진적 TDD 도전

1. Util 성격의 기능
2. 테스트 가능한 기능
3. 테스트 하기 어려운 기능
4. 테스트 하기 어려운 코드를 테스트 하기 쉬운 구조로 변경
  - 테스트하기 힘든 코드는 의존관계를 Object Graph의 상위로 이동시킨다.


## 테스트가 어려운 코드 예시
- 내부 API: Random, shuffle, 날짜
- 외부 세계: 외부 REST API, 데이터베이스 API


## 코드 리팩토링
1. 한 메서드에 오직 한단게의 들여쓰기만 한다
2. else 예약어를 쓰지 않는다
3. 원시값과 문자열을 포장한다
4. 일급 콜렉션을 쓴다
